<div style="margin: 0px 60px;">

	<% content_for :title do -%>
	Perfil de <%= current_user.name %><%= current_user.current_password %>
	<% end -%>

	<div class="panel panel-default">
		<div class="panel-body table">
			<%= form_for(current_user, url: {action: "update_profile"})  do |f| %>

			<% if @user.errors.any? %>
			<div id="error_explanation" class="text-danger modal-errors">
				<ul>
					<% @user.errors.full_messages.each do |message| %>
					<li><%= message %></li>
					<% end %>
				</ul>
			</div>
			<% end %>

			<div class="row">
				<div class="col-sm-4">
					<div class="form-group required">
						<%= f.label :document, "Documento", :class => "control-label" %>
						<%= f.text_field :document, :class => "form-control first_input" %>
					</div>
				</div>

				<div class="col-sm-4">
					<div class="form-group required">
						<%= f.label :firstname, "Nombre", :class => "control-label" %>
						<%= f.text_field :firstname, :class => "form-control" %>
					</div>
				</div>

				<div class="col-sm-4">
					<div class="form-group required">
						<%= f.label :lastname, "Apellido", :class => "control-label" %>
						<%= f.text_field :lastname, :class => "form-control" %>
					</div>
				</div>

				<div class="col-sm-4">
					<div class="form-group required">
						<%= f.label :email, "Email", :class => "control-label" %>
						<%= f.email_field :email, :class => "form-control" %>
					</div>
				</div>

				<div class="col-sm-4">
					<div class="form-group required">
						<%= f.label :phone, "Teléfono", :class => "control-label" %>
						<%= f.text_field :phone, :class => "form-control" %>
					</div>
				</div>

				<div class="col-sm-4">
					<div class="form-group required">
						<%= f.label :cellphone, "Celular", :class => "control-label" %>
						<%= f.text_field :cellphone, :class => "form-control" %>
					</div>
				</div>

				<div class="col-sm-12">
					<hr style="border: 1; margin-top: 0px; ">
					<div class="inline" style="margin-bottom: 0px;">
						<%= f.submit "Actualizar Perfil", :class => "btn btn-success bold" %>
					</div>
					<div class="inline" style="margin-bottom: 0px;">
						<button type="button" class="btn btn-primary bold" data-toggle="modal" data-target="#myModal" onclick="start_ajax_user()">
							Cambiar contraseña
						</button>
					</div>
				</div>
			</div>
			<% end %>
		</div>
	</div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog" role="document">
		<div class="modal-content">

			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModalLabel">Cambiar contraseña</h4>
			</div>
			<%= form_for(@user, :url => { :action => "update_password" } ) do |f| %>
				<div id="error_explanation" class="text-danger modal-errors"></div>
				<div class="field">
				 <%= f.label :current_password %> <br />
				 <%= f.password_field :current_password %>
				</div>
			  <div class="field">
			    <%= f.label :password, "Nueva contraseña" %><br />
			    <%= f.password_field :password, :autocomplete => "off"  %>
			  </div>
			  <div class="field">
			    <%= f.label :password_confirmation, "Confirmar contraseña" %><br />
			    <%= f.password_field :password_confirmation %>
			  </div>
			  <div class="action_container">
			    <%= f.submit %>
			  </div>
			<% end %>
			<div class="modal-footer">
				<button type="button" class="btn btn-default bold" data-dismiss="modal">Cerrar</button>
			</div>
		</div>
	</div>
</div>
